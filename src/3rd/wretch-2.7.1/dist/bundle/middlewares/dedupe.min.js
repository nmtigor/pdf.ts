!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).wretchDedupeMiddleware={})}(this,(function(e){"use strict";const t=(e,t)=>t.skipDedupe||"GET"!==t.method,o=(e,t)=>t.method+"@"+e,n=e=>e.clone();e.dedupe=({skip:e=t,key:r=o,resolver:d=n}={})=>{const s=new Map;return t=>(o,n)=>{if(e(o,n))return t(o,n);const i=r(o,n);if(s.has(i))return new Promise(((e,t)=>{s.get(i).push([e,t])}));s.set(i,[]);try{return t(o,n).then((e=>(s.get(i).forEach((([t])=>t(d(e)))),s.delete(i),e))).catch((e=>{throw s.get(i).forEach((([t,o])=>o(e))),s.delete(i),e}))}catch(e){return s.delete(i),Promise.reject(e)}}}}));
//# sourceMappingURL=dedupe.min.js.map

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).wretchRetryMiddleware={})}(this,(function(e){"use strict";const t=(e,t)=>e*t,r=e=>e&&e.ok;e.retry=({delayTimer:e=500,delayRamp:o=t,maxAttempts:n=10,until:i=r,onRetry:s=null,retryOnNetworkError:l=0,resolveWithLatestResponse:u=0,skip:f}={})=>t=>(r,c)=>{let d=0;if(f&&f(r,c))return t(r,c);const p=(f,m)=>Promise.resolve(i(f,m)).then((i=>i?f&&u?f:m?Promise.reject(m):f:(d++,!n||d<=n?new Promise((n=>{const i=o(e,d);setTimeout((()=>{"function"==typeof s?Promise.resolve(s({response:f,error:m,url:r,options:c})).then(((e={})=>{var o,i;n(t(null!==(o=e&&e.url)&&void 0!==o?o:r,null!==(i=e&&e.options)&&void 0!==i?i:c))})):n(t(r,c))}),i)})).then(p).catch((e=>{if(!l)throw e;return p(null,e)})):f&&u?f:Promise.reject(m||new Error("Number of attempts exceeded.")))));return t(r,c).then(p).catch((e=>{if(!l)throw e;return p(null,e)}))}}));
//# sourceMappingURL=retry.min.js.map

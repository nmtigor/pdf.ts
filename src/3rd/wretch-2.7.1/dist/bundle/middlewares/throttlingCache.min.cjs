"use strict";const e=(e,t)=>t.skipCache||"GET"!==t.method,t=(e,t)=>t.method+"@"+e,n=(e,t)=>0,o=(e,t)=>null,c=e=>e.ok;exports.throttlingCache=({throttle:r=1e3,skip:s=e,key:a=t,clear:h=n,invalidate:i=o,condition:l=c,flagResponseOnCacheHit:f="__cached"}={})=>{const d=new Map,u=new Map,p=new Set,g=e=>{r&&!p.has(e)&&(p.add(e),setTimeout((()=>{p.delete(e)}),r))},m=e=>(t,n)=>{const o=a(t,n);let c=i(t,n);if(c&&(c instanceof Array||(c=[c]),c.forEach((e=>{"string"==typeof e?d.delete(e):e instanceof RegExp&&d.forEach(((t,n)=>{e.test(n)&&d.delete(n)}))}))),h(t,n)&&d.clear(),s(t,n))return e(t,n);if(p.has(o)){if(d.has(o)){const e=d.get(o).clone();return f&&Object.defineProperty(e,f,{value:o,enumerable:0}),Promise.resolve(e)}if(u.has(o))return new Promise(((e,t)=>{u.get(o).push([e,t])}))}return u.has(o)||u.set(o,[]),g(o),e(t,n).then((e=>(l(e.clone())&&d.set(o,e.clone()),u.get(o).forEach((([t])=>t(e.clone()))),u.delete(o),e))).catch((e=>{throw u.get(o).forEach((([t,n])=>n(e))),u.delete(o),e}))};return m.cacheResponse=function(e,t){g(e),d.set(e,t)},m.cache=d,m.inflight=u,m.throttling=p,m};
//# sourceMappingURL=throttlingCache.min.cjs.map
